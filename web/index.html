<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GIFtorio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="./script.js"></script>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen space-y-4">
    <form id="blueprint_form" class="bg-white p-6 rounded shadow-md w-full max-w-md">
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="fileInput">Select File</label>
            <input
                class="w-full px-3 py-2 border rounded focus:outline-none focus:ring"
                type="file"
                id="gifInput"
                name="gifInput"
                required
            />
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="framerate">Max Framerate</label>
              <input
                    class="w-full px-3 py-2 border rounded focus:outline-none focus:ring"
                    type="number"
                    id="framerate"
                    name="framerate"
                    placeholder="Enter max framerate (won't exceed original)"
                    value="30"
              />
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="maxwidth">Max Width</label>
            <input
                class="w-full px-3 py-2 border rounded focus:outline-none focus:ring"
                type="number"
                id="maxsize"
                name="maxsize"
                placeholder="Enter max width"
                value="100"
            />
        </div>
        <div class="mb-4 flex items-center">
            <span class="mr-4 text-gray-700 font-bold">Space Age?</span>
            <label for="toggle" class="flex items-center cursor-pointer">
                <div class="relative">
                    <input id="toggle" type="checkbox" name="toggle" class="sr-only" />
                    <div id="togglebg" class="block bg-gray-300 w-14 h-8 rounded-full"></div>
                    <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"></div>
                </div>
                <div class="ml-3 text-gray-700 font-medium" id="toggleLabel">No</div>
            </label>
        </div>
        <div id="quality" class="mb-4 hidden">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="substationQuality">Substation Quality</label>
            <select id="substationQuality" name="substationQuality" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring">
                <option value="normal">Normal</option>
                <option value="uncommon">Uncommon</option>
                <option value="rare">Rare</option>
                <option value="epic">Epic</option>
                <option value="legendary">Legendary</option>
            </select>
        </div>
        <div class="flex items-center justify-between">
            <button
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                id="submit"
                type="submit">
                Submit
                <svg id="spinner" class="hidden ml-2 -ml-1 size-5 animate-spin text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            </button>
        </div>
    </form>

    <div id="blueprintStatus" class="bg-white p-6 rounded shadow-md w-full max-w-md hidden">
        <h2 id="blueprintTitle" class="text-xl font-bold mb-2"></h2>
        <div id="progressContainer">
            <div class="w-full bg-gray-200 rounded-full h-4 mb-2">
                <div id="progressBar" class="bg-blue-500 h-4 rounded-full" style="width: 0%"></div>
            </div>
            <p id="progressStatus" class="text-gray-700">Starting...</p>
        </div>
        <div id="blueprintResult" class="hidden">
            <div id="responseText" class="bg-gray-50 p-4 border rounded overflow-auto max-h-64 mb-2"></div>
            <button id="copyButton" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded">
                Copy
            </button>
        </div>
    </div>

    <script>
        const toggleInput = document.getElementById('toggle');
        const toggleBg = document.getElementById('togglebg');
        const toggleLabel = document.getElementById('toggleLabel');
        const dot = document.querySelector('.dot');
        const substationQualityDiv = document.getElementById('quality');

        toggleInput.addEventListener('change', function () {
            toggleLabel.textContent = toggleInput.checked ? 'Yes' : 'No';
            toggleBg.classList.toggle('bg-gray-600', toggleInput.checked);
              toggleBg.classList.toggle('bg-gray-300', !toggleInput.checked);
              substationQualityDiv.classList.toggle('hidden', !toggleInput.checked);

              if (toggleInput.checked) {
                dot.style.transform = 'translateX(100%)';
              } else {
                dot.style.transform = 'translateX(0)';
              }
        });

        document.getElementById('copyButton').addEventListener('click', function () {
          const responseText = document.getElementById('responseText').innerText;
          navigator.clipboard.writeText(responseText)
            .then(() => {
              console.log('Blueprint copied to clipboard!');
            })
            .catch((err) => {
              console.error('Failed to copy blueprint:', err);
            });
        });
    </script>
</body>
